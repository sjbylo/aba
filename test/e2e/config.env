# =============================================================================
# E2E Test Framework -- Default Configuration
# =============================================================================
# Baseline defaults for all test runs. These can be overridden by:
#   1. Per-pool overrides in pools.conf
#   2. CLI flags passed to run.sh
#
# Precedence: CLI flags > pool overrides > config.env defaults
# =============================================================================

# --- Test parameters --------------------------------------------------------

TEST_CHANNEL=stable               # stable | fast | candidate
VER_OVERRIDE=l                    # l=latest | p=previous | x.y.z
INTERNAL_BASTION_RHEL_VER=rhel9   # rhel8 | rhel9 | rhel10
TEST_USER=steve                   # User on the internal bastion (any user or root)
OC_MIRROR_VER=v2                  # v1 (deprecated) | v2

# --- Environment ------------------------------------------------------------

ABA_TESTING=1                     # Disables usage tracking to api.counterapi.dev

# --- Timeouts ---------------------------------------------------------------

OPERATOR_WAIT_TIMEOUT=1800        # Seconds to wait for cluster operators to settle
SSH_WAIT_TIMEOUT=300              # Seconds to wait for SSH to become available
VM_BOOT_DELAY=8                   # Seconds to sleep after govc vm.power -on

# --- Notifications ----------------------------------------------------------

NOTIFY_CMD=                       # Command for notifications (e.g. notify.sh). Empty = disabled.

# --- VMware -----------------------------------------------------------------

VMWARE_CONF=~/.vmware.conf       # Path to govc configuration file
VC_FOLDER=/Datacenter/vm/abatesting  # vCenter folder for test VMs
VM_SNAPSHOT=aba-test              # Snapshot to revert source VMs to before cloning

# --- Clone MAC Addresses ---------------------------------------------------
# After cloning, each clone's NICs must be set to specific MACs so that
# DHCP assigns the correct IP addresses (tied to DHCP reservations).
#
# All clones have 3 NICs (same source VM layout). Internal bastions
# simply don't use ens256 -- the NIC exists but has no route/config.
#
# Format: VM_CLONE_MACS[clone_name]="ens192-MAC ens224-MAC ens256-MAC"
#   Position 1 = ethernet-0 / ens192 (private lab, DHCP)
#   Position 2 = ethernet-1 / ens224 (VLAN, static IP)
#   Position 3 = ethernet-2 / ens256 (internet, DHCP -- unused on internal bastions)
#
# The VMware port group for each NIC is auto-detected from the clone.
#
# Numbering: 3 MACs per clone, 6 per pool. Pool N starts at (N-1)*6 + 1.
#
declare -A VM_CLONE_MACS=(
    #                        ens192             ens224             ens256
    # Pool 1 (starts at :01):
    [disco1]="00:50:56:ac:bc:01  00:50:56:ac:bc:02  00:50:56:ac:bc:03"
    [reg1]="00:50:56:ac:bc:04  00:50:56:ac:bc:05  00:50:56:ac:bc:06"

    # Pool 2 (starts at :07):
    [disco2]="00:50:56:ac:bc:07  00:50:56:ac:bc:08  00:50:56:ac:bc:09"
    [reg2]="00:50:56:ac:bc:0a  00:50:56:ac:bc:0b  00:50:56:ac:bc:0c"

    # Pool 3 (starts at :0d): ...
)

# --- Clone VLAN IPs (static) -----------------------------------------------
# The 10.10.10.0/24 VLAN has NO DHCP. IPs must be statically assigned.
# This array defines the ens224.10 VLAN IP for each clone.
#
# Format: VM_CLONE_VLAN_IPS[clone_name]="IP/PREFIX"
#
declare -A VM_CLONE_VLAN_IPS=(
    # Pool 1:
    [disco1]="10.10.10.1/24"
    [reg1]="10.10.10.2/24"

    # Pool 2:
    [disco2]="10.10.10.3/24"
    [reg2]="10.10.10.4/24"

    # Pool 3+: continue from .5 ...
)
